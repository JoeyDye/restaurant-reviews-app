"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))});google.maps.event.addDomListener(window,"load",function(){document.querySelector("iframe").setAttribute("title","Map of restaurant location")})},fetchRestaurantFromURL=function(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}):(error="No restaurant id in URL",n(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=document.getElementById("restaurant-img");t.className="restaurant-img",t.src=DBHelper.imageUrlForRestaurant(e),t.alt=e.image_description,document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);var l=document.createElement("td");l.innerHTML=e[n],r.appendChild(l),t.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void t.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),t.appendChild(a)},createReviewHTML=function(e){var t=document.createElement("li"),n=document.createElement("p");n.innerHTML=e.name,t.appendChild(n);var r=document.createElement("p");r.innerHTML=e.date,t.appendChild(r);var a=document.createElement("p");a.innerHTML="Rating: "+e.rating,t.appendChild(a);var l=document.createElement("p");return l.innerHTML=e.comments,t.appendChild(l),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJtYXAiLCJyZXN0YXVyYW50Iiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsImNvbnNvbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJzZWxmIiwiZ29vZ2xlIiwic2Nyb2xsd2hlZWwiLCJEQkhlbHBlciIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJldmVudCIsImFkZERvbUxpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsImFkZEF0dHJpYnV0ZSIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuYW1lIiwiaW1hZ2UiLCJhZGRyZXNzIiwiaW5uZXJIVE1MIiwiYWx0IiwiaW1hZ2VfZGVzY3JpcHRpb24iLCJzcmMiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJjdWlzaW5lIiwiZmlsbFJldmlld3NIVE1MIiwiZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwiLCJvcGVyYXRpbmdIb3VycyIsIm9wZXJhdGluZ19ob3VycyIsImhvdXJzIiwiY3JlYXRlRWxlbWVudCIsImRheSIsInJvdyIsImtleSIsImFwcGVuZENoaWxkIiwidGltZSIsInJldmlld3MiLCJjb250YWluZXIiLCJ0aXRsZSIsIm5vUmV2aWV3cyIsInJldmlldyIsInVsIiwibGkiLCJjcmVhdGVSZXZpZXdIVE1MIiwiZGF0ZSIsInJhdGluZyIsImNvbW1lbnRzIiwiZmlsbEJyZWFkY3J1bWIiLCJicmVhZGNydW1iIiwiaHJlZiIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwidXJsIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFDSUEsSUFEQUMsZ0JBQUFBLEVBTUpDLE9BQU9DLFFB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RUFBWWxCLFNBQWZjLGNBQUEsS0FPQWUsRUFBTzFCLFVBQVAsV0FBOEJxQixFQUFPSyxPQUxyQ0gsRUFBQVIsWUFBYXJDLEdBRWI2QyxJQUFHUixFQUFZVSxTQUFmZCxjQUFBLEtBSUFZLE9BR0FJLEVBQVMzQixVQUFZcUIsRUFBT00sU0FMNUJKLEVBQUFSLFlBQWVyQyxHQUVacUMsR0FNSGEsZUFBQSxXQUFBLElBQUExRCxFQUFBLEVBQUF3QixVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQWIsS0FBQVgsV0FsQkYyRCxFQUFBbkQsU0FBQUMsZUFBQSxjQTBCUTRDLEVBQUs3QyxTQUFTaUMsY0FBYyxNQUxwQ1ksRUFBQXZCLFVBQUE5QixFQUFBMkIsS0FPRWdDLEVBQVdkLFlBQVlRLElBRnZCL0IsbUJBQW9CbUIsU0FBQUEsRUFBQUEsR0FDakJYLElBQUFBLEVBQVk5QixPQUFBQSxTQUFmNEQsTUFDQUQsRUFBQUEsRUFBV2QsUUFBQUEsVUFBWCxRQUpGLElBY0lnQixFQWRKLElBQUFDLE9BQUEsT0FBQW5DLEVBQUEscUJBY29Cb0MsS0FBS0MsR0FQekIsT0FBQUgsRUFTT0EsRUFBUSxHQUNOSSxtQkFBbUJKLEVBQVEsR0FBR0ssUUFBUSxNQUFPLE1BRDVCLEdBVDFCIiwiZmlsZSI6InJlc3RhdXJhbnRfaW5mby5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50O1xudmFyIG1hcDtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gSW5pdGlhbGl6ZSBHb29nbGUgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxuICovXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcbiAgZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCgoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgIHpvb206IDE2LFxuICAgICAgICBjZW50ZXI6IHJlc3RhdXJhbnQubGF0bG5nLFxuICAgICAgICBzY3JvbGx3aGVlbDogZmFsc2VcbiAgICAgIH0pO1xuICAgICAgZmlsbEJyZWFkY3J1bWIoKTtcbiAgICAgIERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQoc2VsZi5yZXN0YXVyYW50LCBzZWxmLm1hcCk7XG4gICAgfVxuICB9KTtcbiAgY29uc3QgYWRkQXR0cmlidXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lmcmFtZScpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgJ01hcCBvZiByZXN0YXVyYW50IGxvY2F0aW9uJyk7XG4gIH07XG5cbiAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIod2luZG93LCAnbG9hZCcsIGFkZEF0dHJpYnV0ZSk7XG59O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBHZXQgY3VycmVudCByZXN0YXVyYW50IGZyb20gcGFnZSBVUkwuXG4gKi9cbmZldGNoUmVzdGF1cmFudEZyb21VUkwgPSBjYWxsYmFjayA9PiB7XG4gIGlmIChzZWxmLnJlc3RhdXJhbnQpIHtcbiAgICAvLyByZXN0YXVyYW50IGFscmVhZHkgZmV0Y2hlZCFcbiAgICBjYWxsYmFjayhudWxsLCBzZWxmLnJlc3RhdXJhbnQpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBpZCA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaWQnKTtcbiAgaWYgKCFpZCkge1xuICAgIC8vIG5vIGlkIGZvdW5kIGluIFVSTFxuICAgIGVycm9yID0gJ05vIHJlc3RhdXJhbnQgaWQgaW4gVVJMJztcbiAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gIH0gZWxzZSB7XG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlJZChpZCwgKGVycm9yLCByZXN0YXVyYW50KSA9PiB7XG4gICAgICBzZWxmLnJlc3RhdXJhbnQgPSByZXN0YXVyYW50O1xuICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBmaWxsUmVzdGF1cmFudEhUTUwoKTtcbiAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnQpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2VcbiAqL1xuZmlsbFJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LW5hbWUnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XG5cbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XG5cbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xuICBpbWFnZS5hbHQgPSByZXN0YXVyYW50LmltYWdlX2Rlc2NyaXB0aW9uO1xuXG4gIGNvbnN0IGN1aXNpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1jdWlzaW5lJyk7XG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XG5cbiAgLy8gZmlsbCBvcGVyYXRpbmcgaG91cnNcbiAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XG4gICAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKTtcbiAgfVxuICAvLyBmaWxsIHJldmlld3NcbiAgZmlsbFJldmlld3NIVE1MKCk7XG59O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBDcmVhdGUgcmVzdGF1cmFudCBvcGVyYXRpbmcgaG91cnMgSFRNTCB0YWJsZSBhbmQgYWRkIGl0IHRvIHRoZSB3ZWJwYWdlLlxuICovXG5maWxsUmVzdGF1cmFudEhvdXJzSFRNTCA9IChcbiAgb3BlcmF0aW5nSG91cnMgPSBzZWxmLnJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzXG4pID0+IHtcbiAgY29uc3QgaG91cnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1ob3VycycpO1xuICBmb3IgKGxldCBrZXkgaW4gb3BlcmF0aW5nSG91cnMpIHtcbiAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgY29uc3QgZGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICBkYXkuaW5uZXJIVE1MID0ga2V5O1xuICAgIHJvdy5hcHBlbmRDaGlsZChkYXkpO1xuXG4gICAgY29uc3QgdGltZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgdGltZS5pbm5lckhUTUwgPSBvcGVyYXRpbmdIb3Vyc1trZXldO1xuICAgIHJvdy5hcHBlbmRDaGlsZCh0aW1lKTtcblxuICAgIGhvdXJzLmFwcGVuZENoaWxkKHJvdyk7XG4gIH1cbn07XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIENyZWF0ZSBhbGwgcmV2aWV3cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cbiAqL1xuZmlsbFJldmlld3NIVE1MID0gKHJldmlld3MgPSBzZWxmLnJlc3RhdXJhbnQucmV2aWV3cykgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1jb250YWluZXInKTtcbiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICB0aXRsZS5pbm5lckhUTUwgPSAnUmV2aWV3cyc7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgaWYgKCFyZXZpZXdzKSB7XG4gICAgY29uc3Qgbm9SZXZpZXdzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIG5vUmV2aWV3cy5pbm5lckhUTUwgPSAnTm8gcmV2aWV3cyB5ZXQhJztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XG4gIHJldmlld3MuZm9yRWFjaChyZXZpZXcgPT4ge1xuICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gIH0pO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodWwpO1xufTtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNyZWF0ZVJldmlld0hUTUwgPSByZXZpZXcgPT4ge1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmV2aWV3Lm5hbWU7XG4gIGxpLmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGRhdGUuaW5uZXJIVE1MID0gcmV2aWV3LmRhdGU7XG4gIGxpLmFwcGVuZENoaWxkKGRhdGUpO1xuXG4gIGNvbnN0IHJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgcmF0aW5nLmlubmVySFRNTCA9IGBSYXRpbmc6ICR7cmV2aWV3LnJhdGluZ31gO1xuICBsaS5hcHBlbmRDaGlsZChyYXRpbmcpO1xuXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBjb21tZW50cy5pbm5lckhUTUwgPSByZXZpZXcuY29tbWVudHM7XG4gIGxpLmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcblxuICByZXR1cm4gbGk7XG59O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBBZGQgcmVzdGF1cmFudCBuYW1lIHRvIHRoZSBicmVhZGNydW1iIG5hdmlnYXRpb24gbWVudVxuICovXG5maWxsQnJlYWRjcnVtYiA9IChyZXN0YXVyYW50ID0gc2VsZi5yZXN0YXVyYW50KSA9PiB7XG4gIGNvbnN0IGJyZWFkY3J1bWIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnJlYWRjcnVtYicpO1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XG59O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBHZXQgYSBwYXJhbWV0ZXIgYnkgbmFtZSBmcm9tIHBhZ2UgVVJMLlxuICovXG5nZXRQYXJhbWV0ZXJCeU5hbWUgPSAobmFtZSwgdXJsKSA9PiB7XG4gIGlmICghdXJsKSB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcW1xcXV0vZywgJ1xcXFwkJicpO1xuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKSxcbiAgICByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICBpZiAoIXJlc3VsdHMpIHJldHVybiBudWxsO1xuICBpZiAoIXJlc3VsdHNbMl0pIHJldHVybiAnJztcbiAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHRzWzJdLnJlcGxhY2UoL1xcKy9nLCAnICcpKTtcbn07XG4iXX0=
