"use strict";var map,restaurant=void 0;window.initMap=function(){fetchRestaurantFromURL(function(e,t){e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))});google.maps.event.addDomListener(window,"load",function(){document.querySelector("iframe").setAttribute("title","Map of restaurant location")})},fetchRestaurantFromURL=function(n){if(self.restaurant)n(null,self.restaurant);else{var e=getParameterByName("id");e?DBHelper.fetchRestaurantById(e,function(e,t){(self.restaurant=t)?(fillRestaurantHTML(),n(null,t)):console.error(e)}):(error="No restaurant id in URL",n(error,null))}},fillRestaurantHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant;document.getElementById("restaurant-name").innerHTML=e.name,document.getElementById("restaurant-address").innerHTML=e.address;var t=document.getElementById("restaurant-img");t.className="restaurant-img",t.src=DBHelper.imageUrlForRestaurant(e),t.alt=e.image_description,document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()},fillRestaurantHoursHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),a=document.createElement("td");a.innerHTML=n,r.appendChild(a);var l=document.createElement("td");l.innerHTML=e[n],r.appendChild(l),t.appendChild(r)}},fillReviewsHTML=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant.reviews,t=document.getElementById("reviews-container"),n=document.createElement("h2");if(n.innerHTML="Reviews",t.appendChild(n),!e){var r=document.createElement("p");return r.innerHTML="No reviews yet!",void t.appendChild(r)}var a=document.getElementById("reviews-list");e.forEach(function(e){a.appendChild(createReviewHTML(e))}),t.appendChild(a)},createReviewHTML=function(e){var t=document.createElement("li"),n=document.createElement("p");n.innerHTML=e.name,t.appendChild(n);var r=document.createElement("p");r.innerHTML=e.date,t.appendChild(r);var a=document.createElement("p");a.innerHTML="Rating: "+e.rating,t.appendChild(a);var l=document.createElement("p");return l.innerHTML=e.comments,t.appendChild(l),t},fillBreadcrumb=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li");n.innerHTML=e.name,t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJtYXAiLCJyZXN0YXVyYW50Iiwid2luZG93IiwiaW5pdE1hcCIsImZldGNoUmVzdGF1cmFudEZyb21VUkwiLCJlcnJvciIsImNvbnNvbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJzZWxmIiwiZ29vZ2xlIiwic2Nyb2xsd2hlZWwiLCJEQkhlbHBlciIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJldmVudCIsImFkZERvbUxpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsImFkZEF0dHJpYnV0ZSIsImNhbGxiYWNrIiwiaWQiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJmaWxsUmVzdGF1cmFudEhUTUwiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJuYW1lIiwiaW1hZ2UiLCJhZGRyZXNzIiwiaW5uZXJIVE1MIiwiYWx0IiwiaW1hZ2VfZGVzY3JpcHRpb24iLCJzcmMiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJjdWlzaW5lIiwiZmlsbFJldmlld3NIVE1MIiwiZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwiLCJvcGVyYXRpbmdIb3VycyIsIm9wZXJhdGluZ19ob3VycyIsImhvdXJzIiwiY3JlYXRlRWxlbWVudCIsImRheSIsInJvdyIsImtleSIsImFwcGVuZENoaWxkIiwidGltZSIsInJldmlld3MiLCJjb250YWluZXIiLCJ0aXRsZSIsIm5vUmV2aWV3cyIsInJldmlldyIsInVsIiwibGkiLCJjcmVhdGVSZXZpZXdIVE1MIiwiZGF0ZSIsInJhdGluZyIsImNvbW1lbnRzIiwiZmlsbEJyZWFkY3J1bWIiLCJicmVhZGNydW1iIiwiaHJlZiIsInJlc3VsdHMiLCJSZWdFeHAiLCJleGVjIiwidXJsIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFDSUEsSUFEQUMsZ0JBQUFBLEVBTUpDLE9BQU9DLFFBQVUsV0FDZkMsdUJBQXVCLFNBQUNDLEVBQU9KLEdBRDFCRSxFQUVIRyxRQUFBRCxNQUFXQSxJQUVUQyxLQUFBQSxJQUFRRCxJQUFNQSxPQUFkRSxLQUFBQyxJQUFBQyxTQUFBQyxlQUFBLE9BQUEsQ0FGRkMsS0FHTyxHQUNMQyxPQUFBWCxFQUFlWSxPQUNiRixhQUQ2RCxJQUc3REcsaUJBSDZEQyxTQUEvREMsdUJBQUFKLEtBQUFYLFdBQUFXLEtBQUFaLFFBWUhhLE9BSEROLEtBQUFVLE1BQUFDLGVBQUFoQixPQUFBLE9BRkcsV0FaSE8sU0FBQVUsY0FBQSxVQWNNQyxhQUFlLFFBQWZBLGlDQVdSaEIsdUJBQXlCLFNBQUFpQixHQUN2QixHQUFJVCxLQUFLWCxXQUFUb0IsRUFBU3BCLEtBQUFBLEtBQVlBLGdCQUFyQixDQUdFLElBQUFxQixFQUFBQyxtQkFBQSxNQUNERCxFQUtDRCxTQUFTaEIsb0JBQVRpQixFQUFBLFNBQUFqQixFQUFBSixJQUhGVyxLQUlPWCxXQUFBQSxJQUtEdUIscUJBQ0RILEVBQUEsS0FBQXBCLElBSkRXLFFBQUtYLE1BQUxJLE1BTkpBLE1BQVMsMEJBQ1BnQixFQUFBaEIsTUFBQSxTQW1CSm1CLG1CQUFxQixXQUFrQyxJQUFqQ3ZCLEVBQWlDLEVBQUF3QixVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBcEJiLEtBQUtYLFdBQ3pCUSxTQUFTQyxlQUFlLG1CQUR2Q2MsVUFBQUEsRUFBcUJJLEtBSUhuQixTQUFTQyxlQUFlLHNCQUhsQ2tCLFVBQWdCbEIsRUFBQUEsUUFNdEIsSUFBTW1CLEVBQVFwQixTQUFTQyxlQUFlLGtCQUh0Q21CLEVBQU1DLFVBQVVyQixpQkFDaEJxQixFQUFBQSxJQUFRQyxTQUFZOUIsc0JBQXBCQSxHQUtBNEIsRUFBTUcsSUFBTS9CLEVBQVdnQyxrQkFGdkJ4QixTQUFrQkMsZUFBbEIsc0JBQ013QixVQUFNbkIsRUFBU29CLGFBR2ZDLEVBQVUzQixpQkFDaEIyQiwwQkFHQUMsbUJBVUZDLHdCQUEwQixXQUVyQixJQUxMQyxFQUtLLEVBQUFkLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUxMYixLQUFBWCxXQUFBdUMsZ0JBTVFDLEVBQVFoQyxTQUFTQyxlQUFlLG9CQUh4QzRCLElBQUFBLElBQUFBLEtBQUFBLEVBQTBCLENBRXJCLElBREhDLEVBQUFBLFNBQ0dHLGNBQUEsTUFDR0QsRUFBUWhDLFNBQVNDLGNBQWUsTUFDdENpQyxFQUFLWixVQUFXUSxFQUNkSyxFQUFNQSxZQUFNbkMsR0FFWixJQUFNa0MsRUFBTWxDLFNBQVNpQyxjQUFjLE1BQ25DQyxFQUFJWixVQUFZYyxFQUFoQkEsR0FDQUQsRUFBSUUsWUFBWUgsR0FFaEJGLEVBQU1NLFlBQU90QyxLQVdqQjRCLGdCQUFrQixXQUF1QyxJQUF0Q1csRUFBc0MsRUFBQXZCLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUE1QmIsS0FBS1gsV0FBVytDLFFBSDdDQyxFQUFBeEMsU0FBQUMsZUFBQSxxQkFLUXdDLEVBQVF6QyxTQUFTaUMsY0FBYyxNQUlyQyxHQUhBUSxFQUFNbkIsVUFBWSxVQUhwQk0sRUFBQUEsWUFBa0JhLElBTVhGLEVBQVMsQ0FMZCxJQUFNQyxFQUFZeEMsU0FBU0MsY0FBZSxLQUcxQ3VDLE9BRkFFLEVBQWMxQyxVQUFTaUMsdUJBQ3ZCUSxFQUFNbkIsWUFBWW9CLEdBR2xCLElBQUtILEVBQUFBLFNBQVN0QyxlQUFBLGdCQUNac0MsRUFBTUcsUUFBQUEsU0FBQUEsR0FDTkEsRUFBQUEsWUFBVXBCLGlCQUFZcUIsTUFFdEJILEVBQUFILFlBQUFPLElBTUZKLGlCQUFVSCxTQUFBQSxHQWhCWixJQUFBUSxFQUFBN0MsU0FBQWlDLGNBQUEsTUF3QlFkLEVBQU9uQixTQUFTaUMsY0FBYyxLQUx0Q2QsRUFBQUcsVUFBQXFCLEVBQUF4QixLQU9FMEIsRUFBR1IsWUFBWWxCLEdBSmpCMkIsSUFBQUEsRUFBQUEsU0FBbUJiLGNBQUEsS0FDakJjLEVBQU1GLFVBQUs3QyxFQUFTaUMsS0FDcEJZLEVBQUFSLFlBQWFyQyxHQUViNkMsSUFBR1IsRUFBWWxCLFNBQWZjLGNBQUEsS0FPQWUsRUFBTzFCLFVBQVAsV0FBOEJxQixFQUFPSyxPQUxyQ0gsRUFBQVIsWUFBYXJDLEdBRWI2QyxJQUFHUixFQUFZVSxTQUFmZCxjQUFBLEtBSUFZLE9BR0FJLEVBQVMzQixVQUFZcUIsRUFBT00sU0FMNUJKLEVBQUFSLFlBQWVyQyxHQUVacUMsR0FNSGEsZUFBQSxXQUFBLElBQUExRCxFQUFBLEVBQUF3QixVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQWIsS0FBQVgsV0FsQkYyRCxFQUFBbkQsU0FBQUMsZUFBQSxjQTBCUTRDLEVBQUs3QyxTQUFTaUMsY0FBYyxNQUxwQ1ksRUFBQXZCLFVBQUE5QixFQUFBMkIsS0FPRWdDLEVBQVdkLFlBQVlRLElBRnZCL0IsbUJBQW9CbUIsU0FBQUEsRUFBQUEsR0FDakJYLElBQUFBLEVBQVk5QixPQUFBQSxTQUFmNEQsTUFDQUQsRUFBQUEsRUFBV2QsUUFBQUEsVUFBWCxRQUpGLElBY0lnQixFQWRKLElBQUFDLE9BQUEsT0FBQW5DLEVBQUEscUJBY29Cb0MsS0FBS0MsR0FQekIsT0FBQUgsRUFTT0EsRUFBUSxHQUNOSSxtQkFBbUJKLEVBQVEsR0FBR0ssUUFBUSxNQUFPLE1BRDVCLEdBVDFCIiwiZmlsZSI6InJlc3RhdXJhbnRfaW5mby5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50O1xudmFyIG1hcDtcblxuLyoqXG4gKiBJbml0aWFsaXplIEdvb2dsZSBtYXAsIGNhbGxlZCBmcm9tIEhUTUwuXG4gKi9cbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xuICBmZXRjaFJlc3RhdXJhbnRGcm9tVVJMKChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgLy8gR290IGFuIGVycm9yIVxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICAgICAgem9vbTogMTYsXG4gICAgICAgIGNlbnRlcjogcmVzdGF1cmFudC5sYXRsbmcsXG4gICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICBmaWxsQnJlYWRjcnVtYigpO1xuICAgICAgREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChzZWxmLnJlc3RhdXJhbnQsIHNlbGYubWFwKTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBhZGRBdHRyaWJ1dGUgPSAoKSA9PiB7XG4gICAgY29uc3QgaWZyYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaWZyYW1lJyk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnTWFwIG9mIHJlc3RhdXJhbnQgbG9jYXRpb24nKTtcbiAgfTtcblxuICBnb29nbGUubWFwcy5ldmVudC5hZGREb21MaXN0ZW5lcih3aW5kb3csICdsb2FkJywgYWRkQXR0cmlidXRlKTtcbn07XG5cbi8qKlxuICogR2V0IGN1cnJlbnQgcmVzdGF1cmFudCBmcm9tIHBhZ2UgVVJMLlxuICovXG5mZXRjaFJlc3RhdXJhbnRGcm9tVVJMID0gY2FsbGJhY2sgPT4ge1xuICBpZiAoc2VsZi5yZXN0YXVyYW50KSB7XG4gICAgLy8gcmVzdGF1cmFudCBhbHJlYWR5IGZldGNoZWQhXG4gICAgY2FsbGJhY2sobnVsbCwgc2VsZi5yZXN0YXVyYW50KTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgaWQgPSBnZXRQYXJhbWV0ZXJCeU5hbWUoJ2lkJyk7XG4gIGlmICghaWQpIHtcbiAgICAvLyBubyBpZCBmb3VuZCBpbiBVUkxcbiAgICBlcnJvciA9ICdObyByZXN0YXVyYW50IGlkIGluIFVSTCc7XG4gICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICB9IGVsc2Uge1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5SWQoaWQsIChlcnJvciwgcmVzdGF1cmFudCkgPT4ge1xuICAgICAgc2VsZi5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcbiAgICAgIGlmICghcmVzdGF1cmFudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZmlsbFJlc3RhdXJhbnRIVE1MKCk7XG4gICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KTtcbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2VcbiAqL1xuZmlsbFJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LW5hbWUnKTtcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XG5cbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcbiAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XG5cbiAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1pbWcnKTtcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcbiAgaW1hZ2Uuc3JjID0gREJIZWxwZXIuaW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xuICBpbWFnZS5hbHQgPSByZXN0YXVyYW50LmltYWdlX2Rlc2NyaXB0aW9uO1xuXG4gIGNvbnN0IGN1aXNpbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1jdWlzaW5lJyk7XG4gIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XG5cbiAgLy8gZmlsbCBvcGVyYXRpbmcgaG91cnNcbiAgaWYgKHJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XG4gICAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwoKTtcbiAgfVxuICAvLyBmaWxsIHJldmlld3NcbiAgZmlsbFJldmlld3NIVE1MKCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmZpbGxSZXN0YXVyYW50SG91cnNIVE1MID0gKFxuICBvcGVyYXRpbmdIb3VycyA9IHNlbGYucmVzdGF1cmFudC5vcGVyYXRpbmdfaG91cnNcbikgPT4ge1xuICBjb25zdCBob3VycyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWhvdXJzJyk7XG4gIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xuICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICBjb25zdCBkYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XG4gICAgcm93LmFwcGVuZENoaWxkKGRheSk7XG5cbiAgICBjb25zdCB0aW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XG4gICAgcm93LmFwcGVuZENoaWxkKHRpbWUpO1xuXG4gICAgaG91cnMuYXBwZW5kQ2hpbGQocm93KTtcbiAgfVxufTtcblxuLyoqXG4gKiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmZpbGxSZXZpZXdzSFRNTCA9IChyZXZpZXdzID0gc2VsZi5yZXN0YXVyYW50LnJldmlld3MpID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtY29udGFpbmVyJyk7XG4gIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgdGl0bGUuaW5uZXJIVE1MID0gJ1Jldmlld3MnO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gIGlmICghcmV2aWV3cykge1xuICAgIGNvbnN0IG5vUmV2aWV3cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISc7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vUmV2aWV3cyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtbGlzdCcpO1xuICByZXZpZXdzLmZvckVhY2gocmV2aWV3ID0+IHtcbiAgICB1bC5hcHBlbmRDaGlsZChjcmVhdGVSZXZpZXdIVE1MKHJldmlldykpO1xuICB9KTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIHJldmlldyBIVE1MIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gKi9cbmNyZWF0ZVJldmlld0hUTUwgPSByZXZpZXcgPT4ge1xuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIG5hbWUuaW5uZXJIVE1MID0gcmV2aWV3Lm5hbWU7XG4gIGxpLmFwcGVuZENoaWxkKG5hbWUpO1xuXG4gIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIGRhdGUuaW5uZXJIVE1MID0gcmV2aWV3LmRhdGU7XG4gIGxpLmFwcGVuZENoaWxkKGRhdGUpO1xuXG4gIGNvbnN0IHJhdGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgcmF0aW5nLmlubmVySFRNTCA9IGBSYXRpbmc6ICR7cmV2aWV3LnJhdGluZ31gO1xuICBsaS5hcHBlbmRDaGlsZChyYXRpbmcpO1xuXG4gIGNvbnN0IGNvbW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICBjb21tZW50cy5pbm5lckhUTUwgPSByZXZpZXcuY29tbWVudHM7XG4gIGxpLmFwcGVuZENoaWxkKGNvbW1lbnRzKTtcblxuICByZXR1cm4gbGk7XG59O1xuXG4vKipcbiAqIEFkZCByZXN0YXVyYW50IG5hbWUgdG8gdGhlIGJyZWFkY3J1bWIgbmF2aWdhdGlvbiBtZW51XG4gKi9cbmZpbGxCcmVhZGNydW1iID0gKHJlc3RhdXJhbnQgPSBzZWxmLnJlc3RhdXJhbnQpID0+IHtcbiAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhZGNydW1iJyk7XG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgbGkuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuICBicmVhZGNydW1iLmFwcGVuZENoaWxkKGxpKTtcbn07XG5cbi8qKlxuICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cbiAqL1xuZ2V0UGFyYW1ldGVyQnlOYW1lID0gKG5hbWUsIHVybCkgPT4ge1xuICBpZiAoIXVybCkgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKTtcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBbPyZdJHtuYW1lfSg9KFteJiNdKil8JnwjfCQpYCksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgaWYgKCFyZXN1bHRzKSByZXR1cm4gbnVsbDtcbiAgaWYgKCFyZXN1bHRzWzJdKSByZXR1cm4gJyc7XG4gIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocmVzdWx0c1syXS5yZXBsYWNlKC9cXCsvZywgJyAnKSk7XG59O1xuIl19
